<!DOCTYPE html><html lang="pt-BR"><head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <meta name="mobile-web-app-capable" content="yes"> <meta name="apple-mobile-web-app-capable" content="yes"> <meta name="apple-mobile-web-app-title" content="Gratuitos!"> <meta name="theme-color" content="#006400"> <meta name="apple-mobile-web-app-status-bar-style" content="default"> <link rel="manifest" href="/manifest.json"> <title>Gratuitos! - Fixados</title> <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/marlonexpert/icones/main/logo1.png"> <link rel="icon" href="https://raw.githubusercontent.com/marlonexpert/icones/main/favicon.ico" type="image/x-icon"> <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet"> <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet"> <style> /* ========================================================================== 1. CONFIGURAÇÃO GERAL E VARIÁVEIS DE TEMA (MODO CLARO) ========================================================================== */ :root { --bg-color: #F0F2F5; --text-color: #333333; --text-color-light: #4A4A4A; --card-bg-color: #FFFFFF; --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.08); --header-bg-color: transparent; --input-bg-color: #F8F8F8; --input-border-color: #DDDDDD; --button-bg-color: #E0E0E0; --button-text-color: #333333; --icon-bg-color: #555; --separator-color: #EEEEEE; --primary-color: #007BFF; --primary-color-rgb: 0, 123, 255; --primary-color-hover: #0069D9; --danger-color: #DC3545; --context-menu-bg: #FFFFFF; --context-menu-border: #EEEEEE; --context-menu-item-hover: #F0F0F0; --header-height-desktop: 60px; --header-height-mobile: 50px; --icon-add-color: #006400; --icon-add-color-rgb: 0, 100, 0; --success-color: #28A745; --edit-button-color: #006400; }
body.dark-mode { --bg-color: #121212; --text-color: #EAEAEA; --text-color-light: #a0a0a0; --card-bg-color: #1E1E1E; --card-shadow: none; --header-bg-color: transparent; --input-bg-color: #252525; --input-border-color: #383838; --button-bg-color: #333333; --button-text-color: #EAEAEA; --icon-bg-color: #333742; --separator-color: #383838; --context-menu-bg: #252525; --context-menu-border: #383838; --context-menu-item-hover: #383838; --icon-add-color: #006400; --edit-button-color: #006400; }
html { scroll-behavior: smooth; }
body { font-family: 'Inter', sans-serif; margin: 0; background-color: var(--bg-color); color: var(--text-color); padding-top: var(--header-height-desktop); padding-bottom: 0; transition: background-color .3s ease, color .3s ease; font-size: 1em; line-height: 1.6; }
body.modal-open { overflow: hidden; }
main { padding: 25px; width: 100%; max-width: 1400px; margin: 0 auto; box-sizing: border-box; position: relative; z-index: 1; }
#page-header { position: fixed; top: 0; bottom: auto; left: 0; width: 100%; padding: 10px 25px; background-color: rgba(var(--primary-color-rgb), 0.05); backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px); z-index: 1000; box-shadow: none; border-top: none; border-bottom: none; box-sizing: border-box; display: flex; justify-content: center; align-items: center; transition: transform 0.3s ease-out, background-color 0.3s ease, border-color 0.3s ease; }
#page-header.scrolled-up { transform: translateY(-100%); } #page-header:not(.scrolled-up) { transform: translateY(0); }
.header-content { width: 100%; max-width: 1400px; display: flex; justify-content: flex-end; gap: 5px; align-items: center; position: relative; }
#gratuito-phrase { position: absolute; left: 20px; margin-left: 20px; font-family: 'Dancing Script', cursive; font-size: 1.7em; color: var(--text-color); white-space: nowrap; transition: opacity 0.3s ease-out, transform 0.3s ease-out; cursor: pointer; transform: translateX(0); z-index: 1; }
#gratuito-phrase.hidden { opacity: 0; transform: translateX(-20px); pointer-events: none; }
#search-input { flex-grow: 1; padding: 8px 18px; border: 1px solid var(--input-border-color); border-radius: 25px; font-size: 1.05em; background-color: var(--input-bg-color); color: var(--text-color); outline: none; transition: all .2s ease, width 0.3s ease; height: 40px; width: 0; min-width: 0; opacity: 0; margin-right: 10px; margin-left: 0; pointer-events: none; order: 1; }
#search-input.active { width: 100%; min-width: 100px; opacity: 1; order: 1; pointer-events: all; }
#search-input:focus { border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(var(--primary-color-rgb), 0.2); }
.header-button { flex-shrink: 0; background-color: var(--button-bg-color); color: var(--button-text-color); border: none; border-radius: 50%; width: 40px; height: 40px; cursor: pointer; font-size: 1rem; transition: all .2s ease; display: flex; justify-content: center; align-items: center; padding: 0; z-index: 100; }
#search-button-toggle, #auto-publish-button, #install-button { background-color: var(--icon-add-color); color: white; }
#edit-mode-toggle { background-color: var(--edit-button-color); color: white; }
#search-button-toggle { order: 2; } #edit-mode-toggle { order: 3; } #auto-publish-button { order: 4; } #install-button { order: 5; display: none; } #theme-toggle { order: 6; }
#search-button-toggle:hover, #auto-publish-button:hover, #install-button:hover { background-color: var(--icon-add-color); box-shadow: 0 4px 8px rgba(var(--icon-add-color-rgb), 0.3); transform: translateY(-2px); } #edit-mode-toggle:hover { background-color: var(--edit-button-color); box-shadow: 0 4px 8px rgba(var(--icon-add-color-rgb), 0.3); transform: translateY(-2px); }
.header-button svg { width: 20px; height: 20px; }
.header-button:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); }
#page-header:not(.scrolled-up) .header-button:hover { transform: translateY(0); box-shadow: 4px 4px 8px rgba(0, 0, 0, 0.1); }
#edit-mode-toggle.active { box-shadow: 0 0 0 3px rgba(var(--icon-add-color-rgb), 0.5); transform: scale(1.05); }
#theme-toggle { display: flex; align-items: center; gap: 8px; border-radius: 25px; padding: 0 10px; width: auto; min-width: 90px; background-color: var(--button-bg-color); color: var(--button-text-color); }
#theme-toggle span { font-size: 0.7em; font-weight: 600; }
.category-grid { display: block; }
.category-card { background-color: var(--card-bg-color); box-shadow: var(--card-shadow); margin-bottom: 25px; border-radius: 12px; overflow: visible; transition: box-shadow .3s ease; max-width: 1400px; margin-left: auto; margin-right: auto; }
#category-fixados { margin-top: calc(0px - var(--header-height-desktop) - 25px); position: relative; z-index: 999; box-shadow: var(--card-shadow); margin-bottom: 25px; }
body.dark-mode .category-card { border: 1px solid var(--separator-color); }
.category-header { display: flex; justify-content: space-between; align-items: center; padding: 15px 25px; cursor: pointer; width: 100%; box-sizing: border-box; }
.category-header h2 { margin: 0; font-size: 1.2em; color: var(--text-color); font-weight: 600; }
.category-header::after { content: '−'; font-size: 1.8em; font-weight: bold; color: var(--text-color); transition: transform 0.3s ease-out; }
.category-card.collapsed .category-header::after { transform: rotate(-90deg); content: '+'; }
.icons-grid, #search-results-container { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 15px; padding: 20px; border-top: 1px solid var(--separator-color); max-height: 2000px; transition: max-height 0.4s ease-in-out, padding 0.4s ease-in-out, border-color 0.4s ease; }
.category-card.collapsed .icons-grid { max-height: 0; padding-top: 0; padding-bottom: 0; border-top-color: transparent; overflow: hidden; }
#search-results-container { display: none; background-color: var(--card-bg-color); border-radius: 12px; border: 1px solid var(--separator-color); max-width: 1400px; margin: 0 auto; overflow: visible; }
.icon-card-wrapper { position: relative; z-index: 10; }
.icon-link { display: flex; text-decoration: none; border-radius: 12px; transition: transform 0.2s ease, box-shadow 0.2s ease; height: 90px; box-sizing: border-box; overflow: hidden; background-color: var(--icon-bg-color); position: relative; }
.icon-link:hover { transform: scale(1.03); box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15); }
.icon-link.copy-only { cursor: copy; }
.icon-visual { display: flex; align-items: center; justify-content: center; flex-grow: 1; padding: 15px; position: relative; width: 100%; box-sizing: border-box; }
.icon-text-content { position: static; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 1; padding: 0; color: #FFFFFF !important; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2); }
.icon-title { font-size: 1em; font-weight: 600; text-align: center; text-transform: uppercase; line-height: 1.2; word-break: break-word; white-space: normal; }
.icon-actions-button { position: absolute; top: 8px; right: 8px; background-color: rgba(0, 0, 0, 0.4); border: none; border-radius: 50%; width: 32px; height: 32px; display: flex; justify-content: center; align-items: center; cursor: pointer; z-index: 10; opacity: 0; visibility: hidden; transition: opacity 0.2s ease, visibility 0.2s ease; }
body.edit-mode-active .icon-actions-button { opacity: 1; visibility: visible; }
.icon-card-wrapper:hover .icon-actions-button, .icon-actions-button.active { opacity: 1; visibility: visible; }
.icon-actions-button svg { width: 18px; height: 18px; fill: white; }
.context-menu { position: absolute; top: 45px; right: 8px; background-color: var(--context-menu-bg); border: 1px solid var(--context-menu-border); border-radius: 8px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15); list-style: none; padding: 8px 0; margin: 0; z-index: 9999; min-width: 180px; display: none; }
.context-menu.show { display: block; }
.context-menu li { padding: 10px 15px; cursor: pointer; color: var(--text-color); font-size: 0.95em; transition: background-color 0.2s ease; white-space: nowrap; }
.context-menu li:hover { background-color: var(--context-menu-item-hover); }
.context-menu li.danger-option:hover { background-color: var(--danger-color); color: white; }
.context-menu li.color-picker-option { padding: 0; overflow: hidden; } .context-menu li.color-picker-option label { display: flex; align-items: center; padding: 10px 15px; cursor: pointer; width: 100%; box-sizing: border-box; } .context-menu li.color-picker-option label:hover { background-color: var(--context-menu-item-hover); }
.context-menu li.color-picker-option input[type="color"] { -webkit-appearance: none; -moz-appearance: none; appearance: none; border: none; background: transparent; cursor: pointer; width: 25px; height: 25px; margin-left: auto; padding: 0; }
.context-menu li.color-picker-option input[type="color"]::-webkit-color-swatch-wrapper { padding: 0; }
.context-menu li.color-picker-option input[type="color"]::-webkit-color-swatch { border: 1px solid var(--context-menu-border); border-radius: 50%; }
.verde { background-color: #89C623; } .AZUL { background-color: #2D9BFF; } .tsunami { background-color: #1F73B7; } .academia { background-color: #10559A; } .whatsapp { background-color: #40C351; } .vpn { background-color: #DF337A; } .bloqueador { background-color: #EE3433; } .feriados { background-color: #F84F39; } .codepen { background-color: #424242; } .coelba { background-color: #00a99d; } .embasa { background-color: #03a9f4; } .govbr { background-color: #01A78B; } .azul2 { background-color: #007bff; } .verde2 { background-color: #00995d; } .utilit { background-color: #4285f4; } .wordpress { background-color: #21759b; } .mercadolivre { background-color: #ffe600; } .mega { background-color: #d90000; } .zoom { background-color: #2d8cff; } .cuponomia { background-color: #f26522; } .bradesco { background-color: #ee1c23; } .senai { background-color: #004a8f; } .primecursos { background-color: #f9a825; } .baixar { background-color: #4caf50; } .canais { background-color: #f44336; } .canva { background-color: #1e1e1e; } .concursos { background-color: #673ab7; } .drive { background-color: #4285f4; } .clideo { background-color: #593993; } .multicanaislc { background-color: #29abe2; } .onedrive { background-color: #0078d4; } .globfone { background-color: #00bcd4; } .youtube0, .youtube1 { background-color: #ff0000; } .cartacapital { background-color: #c62828; } .iconicons { background-color: #3f51b5; } .pinterest { background-color: #e60023; } .logodownload { background-color: #000; } .icons8 { background-color: #00a4e5; } .gratispng { background-color: #8bc34a; } .linkcorreios { background-color: #fdd835; } .photoroom { background-color: #6c63ff; } .topflix { background-color: #212121; } .meuguia { background-color: #9c27b0; } .unopar { background-color: #0070c0; } .clideoaudio { background-color: #593993; } .azarado { background-color: #ff9800; } .mercadopago { background-color: #00aee4; } .musclewiki { background-color: #004a8f; } .buscape { background-color: #673ab7; } .gov-curso { background-color: #006400; } .plutotv { background-color: #121212; } .copilot-icon { background-image: linear-gradient(to bottom right, #2196F3, #4CAF50, #FFEB3B, #FF9800, #9C27B0); }
#generator-modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.6); backdrop-filter: blur(5px); z-index: 1040; display: none; opacity: 0; transition: opacity 0.2s ease; }
#generator-modal-overlay.visible { display: block; opacity: 1; }
#generate-icon-code-section { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.95); width: 90%; max-width: 600px; max-height: 90vh; overflow-y: auto; z-index: 1050; padding: 30px; background-color: var(--card-bg-color); border-radius: 12px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2); border-top: 4px solid var(--primary-color); display: none; opacity: 0; transition: opacity 0.2s ease, transform 0.2s ease; }
#generate-icon-code-section.visible { display: block; opacity: 1; transform: translate(-50%, -50%) scale(1); }
#generate-icon-code-section h2 { text-align: center; color: var(--primary-color); margin: 0 0 25px 0; font-size: 1.8em; border-bottom: 1px solid var(--separator-color); padding-bottom: 12px; font-weight: 600; }
#close-generator-modal-btn { position: absolute; top: 15px; right: 15px; background: var(--button-bg-color); border: none; border-radius: 50%; width: 30px; height: 30px; font-size: 1.2rem; font-weight: bold; color: var(--button-text-color); cursor: pointer; display: flex; align-items: center; justify-content: center; line-height: 1; padding: 0; transition: background-color .2s, color .2s; }
.form-group { margin-bottom: 18px; }
.form-group label { display: block; margin-bottom: 6px; font-weight: 500; color: var(--text-color); font-size: 0.95em; }
.form-group input[type="text"], .form-group input[type="url"], .form-group select, .form-group textarea { width: 100%; padding: 10px 14px; border: 1px solid var(--input-border-color); border-radius: 8px; box-sizing: border-box; font-size: 1em; font-family: 'Inter', sans-serif; background-color: var(--input-bg-color); color: var(--text-color); transition: border-color 0.2s, box-shadow 0.2s; }
.form-group input[type="color"] { width: 100%; padding: 6px; height: 40px; border: 1px solid var(--input-border-color); border-radius: 8px; box-sizing: border-box; cursor: pointer; background-color: var(--input-bg-color); }
#submit-icon-button { width: 100%; padding: 12px 18px; background-color: var(--primary-color); color: white; border: none; border-radius: 8px; font-size: 1.1em; cursor: pointer; transition: background-color .2s ease, transform .1s ease; font-weight: 500; margin-top: 15px; }
#confirmation-toast { position: fixed; bottom: 25px; left: 50%; transform: translateX(-50%) scale(0.8); background-color: var(--success-color); color: white; padding: 12px 20px; border-radius: 8px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2); opacity: 0; z-index: 2000; display: flex; align-items: center; gap: 10px; font-weight: 600; transition: opacity 0.3s ease, transform 0.3s ease; pointer-events: none; }
#confirmation-toast.show { opacity: 1; transform: translateX(-50%) scale(1); }
#confirmation-toast svg { width: 24px; height: 24px; fill: white; }
@media (max-width: 768px) { body { padding-top: var(--header-height-mobile); font-size: 0.95em; }
main { padding: 15px; } #category-fixados { margin-top: calc(0px - var(--header-height-mobile) - 15px); margin-bottom: 15px; }
#page-header { padding: 7px 15px; }
.category-header { padding: 15px 15px; }
.icons-grid, #search-results-container { grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); padding: 15px; gap: 12px; }
.icon-link { height: 80px; }
#search-input { font-size: 1em; padding: 7px 15px; height: 36px; }
#gratuito-phrase { font-size: 1.4em; left: 15px; margin-left: 15px; } } </style></head><body> <header id="page-header"> <div class="header-content"> <div id="gratuito-phrase">Aqui tudo é gratuito</div> <button id="search-button-toggle" class="header-button" title="Pesquisar"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"> <path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.64 4.64a.75.75 0 11-1.06 1.06l-4.64-4.64A8.25 8.25 0 012.25 10.5z" clip-rule="evenodd" /> </svg> </button> <input type="text" id="search-input" placeholder=""> <button id="edit-mode-toggle" class="header-button" title="Modo Edição"> <svg id="edit-mode-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"> <path fill-rule="evenodd" d="M12 1.5a5.25 5.25 0 00-5.25 5.25v3a5.25 5.25 0 0010.5 0v-3a5.25 5.25 0 00-5.25-5.25zm-1.75 12.5h3.5A1.75 1.75 0 0014 10.75v-3.5a1.75 1.75 0 00-1.75-1.75h-3.5A1.75 1.75 0 007 7.25v3.5A1.75 1.75 0 008.75 12.5zM12 14.5a.75.75 0 01-.75.75h-3.5a.75.75 0 01-.75-.75v-3.5a.75.75 0 01.75-.75h3.5a.75.75 0 01.75.75v3.5zM4.75 11.25a.75.75 0 01.75-.75h1.5a.75.75 0 010 1.5h-1.5a.75.75 0 01-.75-.75zm13.5 0a.75.75 0 01.75-.75h1.5a.75.75 0 010 1.5h-1.5a.75.75 0 01-.75-.75zM12 15a4.5 4.5 0 100 9 4.5 4.5 0 000-9zm-2.5 4.5a.75.75 0 01.75-.75h3.5a.75.75 0 01.75.75v.5a.75.75 0 01-.75.75h-3.5a.75.75 0 01-.75-.75v-.5z" clip-rule="evenodd"/> </svg> </button> <button id="auto-publish-button" class="header-button" title="Adicionar"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"> <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" /> </svg> </button> <button id="install-button" class="header-button"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"> <path d="M16 11V7c0-2.76-2.24-5-5-5S6 4.24 6 7v4H4v10h16V11h-4zm-6-4c0-1.66 1.34-3 3-3s3 1.34 3 3v4h-6V7zm10 12H4v-6h16v6z"/> </svg> </button> <button id="theme-toggle" class="header-button"> <svg id="theme-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"> <path d="M12 2.25a.75.75 0 0 1 .75.75v2.25a.75.75 0 0 1-1.5 0V3a.75.75 0 0 1 .75-.75ZM7.045 7.045a.75.75 0 0 1 1.06-1.06l1.591 1.59a.75.75 0 0 1-1.06 1.06l-1.59-1.591ZM18.75 12a.75.75 0 01-.75.75h-2.25a.75.75 0 010-1.5h2.25a.75.75 0 01.75.75ZM6.205 17.795a.75.75 0 01-1.06-1.06l1.59-1.591a.75.75 0 011.06 1.06l-1.591 1.59ZM12 15.75a3.75 3.75 0 100 7.5 3.75 3.75 0 000-7.5ZM12 9a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0V9.75A.75.75 0 0112 9Z" /> </svg> <span>Claro</span> </button> </div> </header> <main id="main-content"> <div class="category-grid" id="all-categories-grid"> </div> <div id="search-results-container"> </div> </main> <div id="generator-modal-overlay"></div> <div id="generate-icon-code-section"> <button id="close-generator-modal-btn">×</button> <h2>Novo Ícone</h2> <form id="icon-form"> <input type="hidden" id="iconIdInput"> <div class="form-group"> <label>Nome</label> <input type="text" id="iconNameInput" required> </div> <div class="form-group"> <label>Descrição</label> <textarea id="iconDescriptionInput" rows="2"></textarea> </div> <div class="form-group"> <label>Link/Texto</label> <input type="url" id="iconLinkInput" required> </div> <div class="form-group"> <label>URL Imagem</label> <input type="url" id="iconImageUrlInput"> </div> <div class="form-group"> <label>Classe Cor</label> <input type="text" id="iconColorClassInput"> </div> <div class="form-group"> <label>Cor Customizada</label> <input type="color" id="iconCustomBgColorInput" value="#006400"> </div> <div class="form-group"> <label>Categoria</label> <select id="iconCategorySelect" required></select> </div> <button type="submit" id="submit-icon-button">Salvar</button> </form> <div id="form-status-message"></div> </div> <div id="confirmation-toast"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"> <path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.815a.75.75 0 01.19 1.06l-4.5 5.25a.75.75 0 01-1.09.006l-2.25-2.5a.75.75 0 111.114-1.004l1.693 1.888 3.844-4.493a.75.75 0 011.06-.19z" clip-rule="evenodd" /> </svg> <span id="toast-message">Copiado!</span> </div> <script type="module"> import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js"; import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js"; import { getFirestore, collection, onSnapshot, addDoc, doc, updateDoc, deleteDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
const config = { firebase: { apiKey: "AIzaSyDo4HgnZG9To1aeDoAbUd7vbfgSUAHHtSs", authDomain: "iconesutil.firebaseapp.com", projectId: "iconesutil", storageBucket: "iconesutil.appspot.com", messagingSenderId: "88285859566", appId: "1:88285859566:web:e15fdb0c615b494955edff" }, categories: { 'servicos-utilidades': { name: 'Serviços & Utilidades' }, 'cursos-concursos': { name: 'Cursos & Concursos' }, 'ferramentas-downloads': { name: 'Ferramentas & Downloads' }, 'compras-produtividade': { name: 'Compras & Produtividade' }, 'design-audio': { name: 'Design & Áudio' }, 'midia-entretenimento': { name: 'Mídia & Entretenimento' } }, autoPublish: { category: 'servicos-utilidades', colorClass: 'gov-curso', isPinned: true } };
const state = { allIcons: [], currentUser: null, searchTerm: '', isEditMode: false };
const FirebaseService = { db: null, auth: null, init() { const app = initializeApp(config.firebase); this.db = getFirestore(app); this.auth = getAuth(app); }, authenticate(callback) { onAuthStateChanged(this.auth, user => { if (user) state.currentUser = user; else signInAnonymously(this.auth); callback(); }); }, onIconsUpdate(callback) { onSnapshot(collection(this.db, "icones"), snapshot => { const icons = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })); // SALVAR NO CACHE LOCAL PARA PRÓXIMO CARREGAMENTO localStorage.setItem('cachedIcons', JSON.stringify(icons)); callback(icons); }); }, async addIcon(data) { await addDoc(collection(this.db, "icones"), { ...data, createdAt: serverTimestamp() }); }, async updateIcon(id, data) { await updateDoc(doc(this.db, "icones", id), data); }, async deleteIcon(id) { await deleteDoc(doc(this.db, "icones", id)); } };
const UIManager = { elements: {}, init() { this.elements = { body: document.body, mainContent: document.getElementById('main-content'), searchInput: document.getElementById('search-input'), searchButtonToggle: document.getElementById('search-button-toggle'), editModeToggle: document.getElementById('edit-mode-toggle'), editModeIcon: document.getElementById('edit-mode-icon'), autoPublishButton: document.getElementById('auto-publish-button'), themeToggle: document.getElementById('theme-toggle'), themeIcon: document.getElementById('theme-icon'), allCategoriesGrid: document.getElementById('all-categories-grid'), searchResultsContainer: document.getElementById('search-results-container'), modalOverlay: document.getElementById('generator-modal-overlay'), generatorModal: document.getElementById('generate-icon-code-section'), closeModalBtn: document.getElementById('close-generator-modal-btn'), iconForm: document.getElementById('icon-form'), formStatusMessage: document.getElementById('form-status-message'), modalTitle: document.getElementById('modal-title'), submitIconBtn: document.getElementById('submit-icon-button'), confirmationToast: document.getElementById('confirmation-toast'), toastMessage: document.getElementById('toast-message'), gratuitoPhrase: document.getElementById('gratuito-phrase'), }; this.populateCategorySelect(); }, populateCategorySelect() { const select = this.elements.iconForm.elements.iconCategorySelect; select.innerHTML = '<option value="" disabled selected>Categoria</option>'; for (const id in config.categories) select.innerHTML += `<option value="${id}">${config.categories[id].name}</option>`; }, showConfirmationToast(msg) { this.elements.toastMessage.textContent = msg; this.elements.confirmationToast.classList.add('show'); setTimeout(() => this.elements.confirmationToast.classList.remove('show'), 2000); }, async copyToClipboard(text, name) { try { await navigator.clipboard.writeText(text); this.showConfirmationToast(`Copiado: ${name}`); } catch (err) { console.error(err); } }, handleIconClick(e, icon) { if (state.isEditMode) return false; const isUrlVal = (s) => { try { const u = new URL(s); return u.protocol === 'http:' || u.protocol === 'https:'; } catch { return false; } }; if (isUrlVal(icon.link)) return true; e.preventDefault(); this.copyToClipboard(icon.link, icon.name); return false; }, createIconElement(icon) { const wrapper = document.createElement('div'); wrapper.className = 'icon-card-wrapper'; wrapper.dataset.id = icon.id; wrapper.oncontextmenu = (e) => { e.preventDefault(); if (state.isEditMode) this.showContextMenu(icon, wrapper.querySelector('.icon-actions-button')); else this.handleIconClick(e, icon); }; const link = document.createElement('a'); link.href = icon.link; link.className = 'icon-link'; link.target = '_blank'; link.onclick = (e) => this.handleIconClick(e, icon); const visual = document.createElement('div'); visual.className = 'icon-visual'; if (icon.colorClass) visual.classList.add(icon.colorClass); else visual.style.backgroundColor = icon.customBgColor || '#006400'; const title = document.createElement('span'); title.className = 'icon-title'; title.textContent = icon.name; const textContent = document.createElement('div'); textContent.className = 'icon-text-content'; textContent.appendChild(title); visual.appendChild(textContent); link.appendChild(visual); wrapper.appendChild(link); const btn = document.createElement('button'); btn.className = 'icon-actions-button'; btn.innerHTML = '<svg viewBox="0 0 24 24" fill="white"><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>'; btn.onclick = (e) => { e.preventDefault(); e.stopPropagation(); this.showContextMenu(icon, btn); }; wrapper.appendChild(btn); return wrapper; }, createCategoryCard(id, name) { const card = document.createElement('section'); card.className = 'category-card'; card.id = `category-${id}`; card.innerHTML = `<div class="category-header"><h2>${name}</h2></div><div class="icons-grid"></div>`; return card; }, collapseOtherCategories(id) { document.querySelectorAll('.category-card').forEach(c => { if (c.id !== id) c.classList.add('collapsed'); }); }, render() { const { allCategoriesGrid, searchResultsContainer, gratuitoPhrase } = this.elements; allCategoriesGrid.innerHTML = ''; searchResultsContainer.innerHTML = ''; if (state.searchTerm) { searchResultsContainer.style.display = 'grid'; allCategoriesGrid.style.display = 'none'; gratuitoPhrase.classList.add('hidden'); const matches = state.allIcons.filter(i => i.name.toLowerCase().includes(state.searchTerm)); matches.forEach(i => searchResultsContainer.appendChild(this.createIconElement(i))); } else { searchResultsContainer.style.display = 'none'; allCategoriesGrid.style.display = 'block'; gratuitoPhrase.classList.remove('hidden'); const pinned = state.allIcons.filter(i => i.isPinned); if (pinned.length > 0) { const card = this.createCategoryCard('fixados', 'Acesso Rápido'); const grid = card.querySelector('.icons-grid'); pinned.forEach(i => grid.appendChild(this.createIconElement(i))); allCategoriesGrid.appendChild(card); card.querySelector('.category-header').onclick = () => { if (card.classList.toggle('collapsed')) return; this.collapseOtherCategories(card.id); }; } const byCat = state.allIcons.filter(i => !i.isPinned).reduce((acc, i) => { (acc[i.category] = acc[i.category] || []).push(i); return acc; }, {}); for (const id in config.categories) { if (byCat[id]) { const card = this.createCategoryCard(id, config.categories[id].name); const grid = card.querySelector('.icons-grid'); byCat[id].forEach(i => grid.appendChild(this.createIconElement(i))); card.classList.add('collapsed'); allCategoriesGrid.appendChild(card); card.querySelector('.category-header').onclick = () => { if (card.classList.toggle('collapsed')) return; this.collapseOtherCategories(card.id); }; } } } }, toggleTheme(dark) { this.elements.body.classList.toggle('dark-mode', dark); this.elements.themeToggle.querySelector('span').textContent = dark ? 'Escuro' : 'Claro'; }, toggleEditMode(active) { state.isEditMode = active; this.elements.editModeToggle.classList.toggle('active', active); this.elements.body.classList.toggle('edit-mode-active', active); localStorage.setItem('editMode', active ? 'active' : 'inactive'); }, openModal(data = null) { const f = this.elements.iconForm; f.reset(); if (data) { f.elements.iconIdInput.value = data.id; f.elements.iconNameInput.value = data.name; f.elements.iconLinkInput.value = data.link; f.elements.iconCategorySelect.value = data.category; } this.elements.generatorModal.classList.add('visible'); this.elements.modalOverlay.classList.add('visible'); }, closeModal() { this.elements.generatorModal.classList.remove('visible'); this.elements.modalOverlay.classList.remove('visible'); }, showContextMenu(icon, btn) { document.querySelectorAll('.context-menu').forEach(m => m.remove()); const menu = document.createElement('ul'); menu.className = 'context-menu show'; menu.innerHTML = `<li onclick="window.appEdit('${icon.id}')">Editar</li><li onclick="window.appPin('${icon.id}', ${!icon.isPinned})">${icon.isPinned?'Desafixar':'Fixar'}</li><li class="danger-option" onclick="window.appDel('${icon.id}')">Excluir</li>`; btn.parentElement.appendChild(menu); setTimeout(() => document.onclick = () => { menu.remove(); document.onclick = null; }, 10); } };
const App = { init() { FirebaseService.init(); UIManager.init();
// CARREGAR CACHE LOCAL IMEDIATAMENTE ANTES DO FIREBASE const cached = localStorage.getItem('cachedIcons'); if (cached) { state.allIcons = JSON.parse(cached); UIManager.render(); }
this.bindEvents(); FirebaseService.authenticate(() => { FirebaseService.onIconsUpdate(icons => { state.allIcons = icons; UIManager.render(); }); }); UIManager.toggleTheme(localStorage.getItem('theme') === 'dark'); UIManager.toggleEditMode(localStorage.getItem('editMode') === 'active');
// Global helpers para o menu de contexto window.appEdit = (id) => { const i = state.allIcons.find(x => x.id === id); UIManager.openModal(i); }; window.appPin = (id, p) => FirebaseService.updateIcon(id, { isPinned: p }); window.appDel = (id) => confirm('Excluir?') && FirebaseService.deleteIcon(id); }, bindEvents() { const { searchInput, searchButtonToggle, autoPublishButton, themeToggle, gratuitoPhrase } = UIManager.elements; searchButtonToggle.onclick = () => { if (searchInput.classList.toggle('active')) searchInput.focus(); else { searchInput.value = ''; state.searchTerm = ''; UIManager.render(); } }; searchInput.oninput = (e) => { state.searchTerm = e.target.value.toLowerCase(); UIManager.render(); }; themeToggle.onclick = () => { const dark = !UIManager.elements.body.classList.contains('dark-mode'); localStorage.setItem('theme', dark ? 'dark' : 'light'); UIManager.toggleTheme(dark); }; autoPublishButton.onclick = () => UIManager.openModal(); UIManager.elements.iconForm.onsubmit = async (e) => { e.preventDefault(); const f = e.target.elements; const data = { name: f.iconNameInput.value, link: f.iconLinkInput.value, category: f.iconCategorySelect.value, customBgColor: f.iconCustomBgColorInput.value }; if (f.iconIdInput.value) await FirebaseService.updateIcon(f.iconIdInput.value, data); else await FirebaseService.addIcon(data); UIManager.closeModal(); }; gratuitoPhrase.onclick = () => { const fix = document.getElementById('category-fixados'); if (fix) { fix.classList.toggle('collapsed'); if (!fix.classList.contains('collapsed')) UIManager.collapseOtherCategories(fix.id); } }; } };
document.addEventListener('DOMContentLoaded', () => App.init()); </script></body></html>
